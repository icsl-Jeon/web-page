---
title: Formatting for your cmake project
date: 2023-04-23
description:
  When collaborating with others on a software project, it's important to ensure
  that the codebase is consistent and well-formatted. This can be achieved
  through the use of code formatting tools such as cmake-format and
  clang-format. cmake-format is a tool that helps to format CMake files in a
  consistent and readable manner. clang-format, on the other hand, is a tool
  that can be used to format C++, Java, JavaScript, and other code in a
  consistent style. By using these tools, developers can ensure that the
  codebase is consistent and easy to read, which can make it easier for other
  developers to understand and work with the code. This can be especially
  important when working on large projects with many contributors, where
  inconsistent formatting can lead to confusion and errors.
thumbnail: /images/post4/main.PNG
keywords: vscode, ubuntu, cmake
---

import Image from "next/image";
import Frontmatter from "../components/Frontmatter";
import Comment from "../components/Comment";

# How to keep C++ and CMakeList codes to be clean

<Frontmatter />

When collaborating with others on a software project, it's important to ensure
that the codebase is consistent and well-formatted. This can be achieved through
the use of code formatting tools such as cmake-format and clang-format.
**cmake-format** is a tool that helps to format CMake files in a consistent and
readable manner. **clang-format**, on the other hand, is a tool that can be used
to format C++, Java, JavaScript, and other code in a consistent style.

By using these tools, developers can ensure that the codebase is consistent and
easy to read, which can make it easier for other developers to understand and
work with the code. This can be especially important when working on large
projects with many contributors, where inconsistent formatting can lead to
confusion and errors.

## Installation of clang-format and cmake-format

### clang-format

```shell
sudo apt-get install clang-format
```

Then check installation:

```shell
/bin$ ls | grep clang
```

### cmake-format

```shell
pip3 install cmake-format
```

- Note: you can either `pip3 install cmake_format` using underbar.
- After installation, we should add `PATH` variable if the prompt says:

  ```
  Installing collected packages: cmakelang
  WARNING: The scripts cmake-annotate, cmake-format, cmake-genparsers, cmake-lint and ctest-to are installed in '/home/jbs/.local/bin' which is not on PATH.
  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
  ```

  To handle this, add `export PATH="~/.local/bin:$PATH"` to `~/.bashrc`.

## VSCode setup

We have to install two extensions:
[clang-foramt](https://marketplace.visualstudio.com/items?itemName=xaver.clang-format)
and
[cmake-format](https://marketplace.visualstudio.com/items?itemName=cheshirekow.cmake-format).

## Applying formatters using vscode

- I assume that you set vscode to
  [reformat code when save](https://stackoverflow.com/questions/39494277/how-do-you-format-code-on-save-in-vs-code).

- To use the formatters in vscode, you should have `.clang-format` and
  `.cmake-format.yaml` as below:

```shell {2-3}
.
├── .clang-format
├── .cmake-format.yaml
├── my_package_core
└── my_package_ros2
```

### 1. clang-format

**clang-format** is just works out-of-box when `.clang-format` is located in
your project root folder (refer
[this](https://github.com/icsl-Jeon/simple-cmake-package)).

<Image
  src="/images/post4/clang-format.gif"
  width={1000}
  height={1000}
  className="my-3"
/>

### 2. cmake-format

In case of cmake-format, we have to modify the executable path (Exe Path) of
cmake-format:

<Image
  src="/images/post4/vscode-setting.png"
  width={500}
  height={1000}
  className="my-3"
/>

When you setup and make `.cmake-format.yaml` in your project folder (example is
[here](https://github.com/NREL/EnergyPlus/blob/develop/.cmake-format.yaml)),
extension cmake-format will work when saving your `CMakeLists.txt` file.

<Image
  src="/images/post4/cmake-format.gif"
  width={1000}
  height={1000}
  className="my-3"
/>

<Comment />
